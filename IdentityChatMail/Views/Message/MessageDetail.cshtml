@using IdentityChatMail.Entities
@model Message

@{
    ViewData["Title"] = "Mesaj Detayı";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row page-titles mx-0">
    <div class="col p-md-0">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="javascript:void(0)">Mesajlar</a></li>
            <li class="breadcrumb-item active"><a href="javascript:void(0)">Mesaj Oku</a></li>
        </ol>
    </div>
</div>

<div class="container-fluid">
    <div class="row">
        <div class="col-lg-12">
            <div class="card">
                <div class="card-body">

                    <div class="email-right-box" style="margin-left: 0 !important; width: 100% !important;">

                        <div class="d-flex justify-content-between align-items-center mb-4 pb-3" style="border-bottom: 1px solid #eee;">

                            <div class="btn-group">
                                <button type="button" class="btn btn-light mr-2" onclick="window.history.back();" data-toggle="tooltip" title="Geri Dön">
                                    <i class="fa fa-arrow-left"></i>
                                </button>
                                <button type="button" class="btn btn-light text-danger" onclick="silmeOnayi(@Model.MessageId)" data-toggle="tooltip" title="Sil">
                                    <i class="fa fa-trash"></i>
                                </button>
                            </div>

                            <div class="text-muted font-weight-bold">
                                <i class="fa fa-clock-o mr-1"></i> @Model.SendDate.ToString("dd MMMM yyyy HH:mm")
                            </div>
                        </div>

                        <div class="read-content mb-4">

                            <h3 class="mb-3" style="color: #7571f9;">@Model.Subject</h3>

                            <div class="media align-items-center">
                                <div class="mr-2 bg-primary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 35px; height: 35px; font-size: 16px; font-weight: bold;">
                                    @Model.SenderEmail.Substring(0, 1).ToUpper()
                                </div>

                                <div class="media-body">
                                    <h6 class="m-0 text-dark" style="font-size: 14px; font-weight: 600;">@Model.SenderEmail</h6>
                                    <small class="text-muted" style="font-size: 12px;">Kime: @Model.ReceiverEmail</small>
                                </div>
                            </div>
                        </div>

                        <div class="read-content-body mt-4" style="font-size: 16px; line-height: 1.6; color: #555;">
                            <p>@Model.MessageDetail</p>
                        </div>

                        <hr>

                        <div class="text-right mt-4">
                            <a href="/Message/CreateMessage?alici=@Model.SenderEmail&konu=@Model.Subject" class="btn btn-primary btn-sl-sm" style="background-color: #7571f9; border-color: #7571f9;">
                                <i class="fa fa-reply mr-2"></i> Cevapla
                            </a>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script>
        function silmeOnayi(id) {
            swal({
                title: "Emin misiniz?",
                text: "Bu mesajı çöp kutusuna taşımak üzeresiniz!",
                icon: "warning",
                buttons: ["Vazgeç", "Evet, Sil!"],
                dangerMode: true,
            })
            .then((willDelete) => {
                if (willDelete) {
                    window.location.href = "/Message/DeleteMessage/" + id;
                }
            });
        }
    </script>
}